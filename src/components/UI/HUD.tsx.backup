```typescript
import React, { useEffect, useState } from 'react'
import { useGameStore } from '../../store/gameStore'
import { SaveSystem } from '../../utils/SaveSystem'
import { Settings } from './Settings'
import { soundManager } from '../../utils/SoundManager'

export const HUD: React.FC = () => {
    const { funds } = useGameStore()
    const [showSettings, setShowSettings] = useState(false)
    
    // Auto-save setup
    useEffect(() => {
        const intervalId = SaveSystem.startAutoSave(30000) // Every 30 seconds
        return () => SaveSystem.stopAutoSave(intervalId)
    }, [])
    
    // Keyboard shortcuts
    useEffect(() => {
        const handleKeyPress = (e: KeyboardEvent) => {
            const { setSelectedTool, setCurveMode, isCurveMode } = useGameStore.getState()
            
            // Ctrl+S to save
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault()
                SaveSystem.save('manual_1')
                soundManager.playSave()
                alert('Game saved!')
                return
            }
            
            // Tool shortcuts
            if (e.key === 'q' || e.key === 'Q') {
                setSelectedTool('select')
                soundManager.playUIClick()
            }
            if (e.key === 'w' || e.key === 'W') {
                setSelectedTool('road')
                soundManager.playUIClick()
            }
            if (e.key === 'e' || e.key === 'E') {
                setSelectedTool('sign')
                soundManager.playUIClick()
            }
            if (e.key === 'r' || e.key === 'R') {
                setSelectedTool('zone')
                soundManager.playUIClick()
            }
            if (e.key === 'c' || e.key === 'C') {
                setCurveMode(!isCurveMode)
                soundManager.playUIClick()
            }
        }
        
        window.addEventListener('keydown', handleKeyPress)
        return () => window.removeEventListener('keydown', handleKeyPress)
    }, [])

    return (
        <div className="absolute inset-0 z-40 pointer-events-none flex flex-col justify-between p-6">
            {/* Top Bar */}
            <div className="flex justify-between items-center pointer-events-auto">
                {/* Left: Funds and Date */}
                <div className="flex gap-4">
                    <div className="bg-black/40 backdrop-blur-md px-4 py-2 rounded-lg border border-white/10">
                        <span className="text-xs text-gray-400">FUNDS</span>
                        <div className="text-green-400 font-mono font-bold text-lg">${funds.toLocaleString()}</div>
                    </div>
                    <div className="bg-black/40 backdrop-blur-md px-4 py-2 rounded-lg border border-white/10">
                        <span className="text-xs text-gray-400">DATE</span>
                        <div className="text-white font-bold">Jan 2024</div>
                    </div>

                    {/* Save/Load Controls */}
                    <div className="flex gap-2">
                        <button
                            className="bg-blue-600/80 hover:bg-blue-600 px-3 py-2 rounded-lg text-white text-xs font-bold transition-all"
                            onClick={() => {
                                SaveSystem.save('manual_1')
                                soundManager.playSave()
                                alert('Game saved!')
                            }}
                        >
                            üíæ SAVE
                        </button>
                        <button
                            className="bg-purple-600/80 hover:bg-purple-600 px-3 py-2 rounded-lg text-white text-xs font-bold transition-all"
                            onClick={() => {
                                if (SaveSystem.load('manual_1')) {
                                    soundManager.playSuccess()
                                    alert('Game loaded!')
                                    window.location.reload()
                                } else {
                                    soundManager.playError()
                                    alert('No save found!')
                                }
                            }}
                        >
                            üìÇ LOAD
                        </button>
                        <button
                            className="bg-gray-600/80 hover:bg-gray-600 px-3 py-2 rounded-lg text-white text-xs font-bold transition-all"
                            onClick={() => {
                                soundManager.playUIClick()
                                setShowSettings(true)
                            }}
                        >
                            ‚öôÔ∏è
                        </button>
                    </div>
                </div>

                {/* Right: Overlays */}
                <OverlayToggles />
            </div>

            {/* Bottom Toolbar */}
            <div className="flex justify-center pointer-events-auto">
                <Toolbar />
            </div>

            {/* Settings Modal */}
            {showSettings && <Settings onClose={() => setShowSettings(false)} />}
        </div>
    )
}

const Toolbar: React.FC = () => {
    const { selectedTool, setSelectedTool, isCurveMode, setCurveMode, selectedSignType, setSelectedSignType } = useGameStore()

    return (
        <div className="bg-black/40 backdrop-blur-md px-6 py-3 rounded-lg border border-white/10 flex gap-2 items-center">
            <ToolButton
                label="SELECT"
                active={selectedTool === 'select'}
                onClick={() => setSelectedTool('select')}
            />
            <ToolButton
                label="ROAD"
                active={selectedTool === 'road'}
                onClick={() => setSelectedTool('road')}
            />
            {selectedTool === 'road' && (
                <ToolButton
                    label={isCurveMode ? "CURVE: ON" : "CURVE: OFF"}
                    active={isCurveMode}
                    onClick={() => setCurveMode(!isCurveMode)}
                />
            )}
            <ToolButton
                label="SIGN"
                active={selectedTool === 'sign'}
                onClick={() => setSelectedTool('sign')}
            />
            {selectedTool === 'sign' && (
                <div className="flex gap-1 ml-2 border-l border-white/10 pl-2">
                    <button
                        className={`px - 2 py - 2 rounded font - bold text - xs transition - all ${ selectedSignType === 'exit' ? 'bg-green-600 text-white shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                        onClick={() => setSelectedSignType('exit')}
                    >
                        EXIT
                    </button>
                    <button
                        className={`px - 2 py - 2 rounded font - bold text - xs transition - all ${ selectedSignType === 'warning' ? 'bg-yellow-500 text-white shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                        onClick={() => setSelectedSignType('warning')}
                    >
                        ‚ö†
                    </button>
                    <button
                        className={`px - 2 py - 2 rounded font - bold text - xs transition - all ${ selectedSignType === 'info' ? 'bg-blue-500 text-white shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                        onClick={() => setSelectedSignType('info')}
                    >
                        ‚Ñπ
                    </button>
                    <button
                        className={`px - 2 py - 2 rounded font - bold text - xs transition - all ${ selectedSignType === 'speed' ? 'bg-white text-black shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                        onClick={() => setSelectedSignType('speed')}
                    >
                        65
                    </button>
                    <button
                        className={`px - 2 py - 2 rounded font - bold text - xs transition - all ${ selectedSignType === 'distance' ? 'bg-green-700 text-white shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                        onClick={() => setSelectedSignType('distance')}
                    >
                        MI
                    </button>
                </div>
            )}
            <ToolButton
                label="ZONE"
                active={selectedTool === 'zone'}
                onClick={() => setSelectedTool('zone')}
            />
            {selectedTool === 'zone' && (
                <div className="flex gap-1 ml-2 border-l border-white/10 pl-2">
                    <ZoneTypeButton type="residential" label="RES" color="bg-green-500" />
                    <ZoneTypeButton type="commercial" label="COM" color="bg-blue-500" />
                    <ZoneTypeButton type="industrial" label="IND" color="bg-yellow-500" />
                </div>
            )}
            <ToolButton
                label="DEMOLISH"
                active={selectedTool === 'demolish'}
                onClick={() => setSelectedTool('demolish')}
                danger
            />
        </div>
    )
}

interface ToolButtonProps {
    label: string
    active: boolean
    onClick: () => void
    danger?: boolean
}

const ToolButton: React.FC<ToolButtonProps> = ({ label, active, onClick, danger }) => {
    const baseClasses = "px-6 py-3 rounded-xl font-bold text-sm transition-all transform hover:scale-105"
    const activeClasses = danger
        ? "bg-red-600 text-white shadow-lg shadow-red-500/20"
        : "bg-blue-600 text-white shadow-lg shadow-blue-500/20"
    const inactiveClasses = "bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"

    return (
        <button
            className={`${ baseClasses } ${ active ? activeClasses : inactiveClasses } `}
            onClick={onClick}
        >
            {label}
        </button>
    )
}

const ZoneTypeButton: React.FC<{ type: 'residential' | 'commercial' | 'industrial', label: string, color: string }> = ({ type, label, color }) => {
    const { selectedZoneType, setSelectedZoneType } = useGameStore()
    const active = selectedZoneType === type

    return (
        <button
            className={`px - 3 py - 3 rounded - lg font - bold text - xs transition - all ${ active ? color + ' text-white shadow-lg scale-105' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
            onClick={() => setSelectedZoneType(type)}
        >
            {label}
        </button>
    )
}

const OverlayToggles: React.FC = () => {
    const { showHeatmap, setShowHeatmap, showNoisePollution, setShowNoisePollution } = useGameStore()

    return (
        <div className="flex gap-2 bg-black/40 backdrop-blur-md px-3 py-2 rounded-lg border border-white/10">
            <button
                className={`px - 3 py - 1 rounded text - xs font - bold transition - all ${ showHeatmap ? 'bg-yellow-500 text-black' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                onClick={() => setShowHeatmap(!showHeatmap)}
            >
                HEATMAP
            </button>
            <button
                className={`px - 3 py - 1 rounded text - xs font - bold transition - all ${ showNoisePollution ? 'bg-red-500 text-white' : 'bg-white/5 text-gray-400 hover:bg-white/10' } `}
                onClick={() => setShowNoisePollution(!showNoisePollution)}
            >
                NOISE
            </button>
        </div>
    )
}
